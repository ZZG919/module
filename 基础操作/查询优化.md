## ST 表

### 标准的st表

[P3865 【模板】ST 表 - 洛谷 | 计算机科学教育新生态 (luogu.com.cn)](https://www.luogu.com.cn/problem/P3865)

```c++
#include <bits/stdc++.h>
using namespace std;
typedef long long LL;
const int N=1e5+10;
int st[N][20],n,a[N],m;
inline int Query(int l,int r){
	//设置区间长度最大为2^k 
	int k=log2(r-l+1);
	// 从左右两边分别取2^k长度(可能有重复的部分，但不影响求区间最大值），求区间的最大值 
	return max(st[l][k],st[r-(1<<k)+1][k]);
} 
int main() {
	scanf("%d%d",&n,&m);
	// 定义st的[i,i + 2^0 - 1]区间最大值 
	for(register int i=1;i<=n;i++)
		scanf("%d",&st[i][0]);
	// 定义st的[i,i + 2^j - 1]的区间最大值,2^j代表i之后的长度
	for(register int j=1;(1<<j) <=n ;++j)	//从2^1开始遍历到2^j<=n 
	{
		for(register int i=1;i+(1<<j)-1 <=n; ++i)	// 设置起始点，从i开始遍历 
		{  
			st[i][j]=max(st[i][j-1],st[i+(1<<(j-1))][j-1]);
		}
	}
	for(register int i=0;i<m;i++)
	{
		int l,r;
		scanf("%d%d",&l,&r);
		printf("%d\n",Query(l,r)); 
	}
	return 0;
}
```

### st表训练2

[P8249 模法问题 - 洛谷 | 计算机科学教育新生态 (luogu.com.cn)](https://www.luogu.com.cn/problem/P8249)

```c++
#include <bits/stdc++.h> 
using namespace std;
int a,b;
int gcd(int a,int b)
{
	if(a<b) swap(a,b);
	return a%b==0 ? b:gcd(b,a%b);
 } 
int lcm(int a,int b)
{
	return a*b/gcd(a,b);
}
int st[1000000][20];
int query(int a,int b)
{
	int j=log2(b-a+1);
	return max(st[a][j],st[b-(1<<j)+1][j]);
}
int minab;
void init()
{
	for(int i=1;i<=minab;i++)
	{
		st[i][0]=i%a+i%b;
	} 
	for(int j=1;(1<<j)<=minab;j++)
	{
		for(int i=1;i+(1<<j)-1<=minab;i++)
		{
			st[i][j]=max(st[i][j-1],st[i+(1<<(j-1))][j-1]);
		}
	}
	return ;
}
int main()
{
	cin >> a >>b;
	minab=lcm(a,b);
	int n;
	cin >> n;
	init();
	for(int i=1;i<=n;i++)
	{
		int l,r;
		cin >> l >> r;
		if(r-l+1>=minab)
		{
			cout << query(1,minab) << endl; 
		}
		else 
		{
			int dis=r-l;
			l%=minab;
			if(l==0) l=1;
			int maxq;
			if(dis+l<=minab) 
				maxq=query(l,l+dis);
			else maxq=max(query(l,minab),query(1,dis+l-minab-1));
			cout << maxq << endl; 
		}
	 } 
	return 0;
}
```

