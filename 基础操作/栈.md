# 栈

## 单调栈1

[P5788 【模板】单调栈 - 洛谷 | 计算机科学教育新生态 (luogu.com.cn)](https://www.luogu.com.cn/problem/P5788)

```c++
#include <bits/stdc++.h>
using namespace std;
int st[3000004],si=0;
int a[3000004];
int ans[3000004];
int main()
{
	int n;
	scanf("%d",&n);
	for(int i=1;i<=n;i++)
	{
		scanf("%d",&a[i]);
		while(si>0 && a[st[si]]<a[i])
		{
			int t=st[si--];
			ans[t]=i;
		}
		st[++si]=i;
	}
	for(int i=1;i<=n;i++)
	{
		printf("%d ",ans[i]);
	}
	return 0;
}
```

## 单调栈2 接雨水

[42. 接雨水 - 力扣（LeetCode）](https://leetcode.cn/problems/trapping-rain-water/)

```c++
class Solution {
public:
    int trap(vector<int>& height) {
        if(height.size()<=1) return 0;
        vector<int> left(height),right(height);
        int sum=0;
        for(int i=1,j=left.size()-2;i<left.size();i++,j--)
        {
            left[i]=max(left[i],left[i-1]);
            right[j]=max(right[j],right[j+1]);
        }
        for(int i=0;i<height.size()-1;i++)
        {
            sum+=min(left[i],right[i])-height[i];
        }
        return sum;
    }
};
```

